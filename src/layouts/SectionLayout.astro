---
import BaseLayout from './BaseLayout.astro';
import Breadcrumbs from '../components/Breadcrumbs.astro';
import { breadcrumbSchema, type BreadcrumbItem } from '../utils/schema';

export interface Props {
  title: string;
  description: string;
  crumbs: BreadcrumbItem[];
  canonicalPath?: string;
  schema?: unknown | unknown[];
  robots?: string;
}

const { title, description, crumbs, canonicalPath, schema, robots } = Astro.props;
const canonicalUrl = new URL(canonicalPath ?? Astro.url.pathname, Astro.site).toString();
const effectiveSchema = schema ?? breadcrumbSchema(crumbs, canonicalUrl);

---

<BaseLayout title={title} description={description} canonicalPath={canonicalPath} schema={effectiveSchema} robots={robots}>
  <div class="space-y-8">
    <Breadcrumbs items={crumbs} />
    <header class="space-y-4 border-b border-brand-border pb-8">
      <h1 class="text-3xl font-bold tracking-tight text-white md:text-4xl lg:text-5xl">{title}</h1>
      <p class="max-w-3xl text-lg leading-relaxed text-slate-400">{description}</p>
    </header>
    <div class="prose prose-invert prose-slate max-w-none prose-a:text-brand-primary prose-a:no-underline hover:prose-a:underline prose-headings:text-slate-100 prose-strong:text-slate-100 prose-code:text-brand-accent">
      <slot />
    </div>
  </div>
</BaseLayout>
